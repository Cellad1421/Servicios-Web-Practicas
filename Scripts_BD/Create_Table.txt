CREATE TABLE Personas (
    ID_Persona INT PRIMARY KEY,
    Nombre VARCHAR(50) NOT NULL,
    Apellido VARCHAR(50) NOT NULL
);

CREATE TABLE Usuarios (
    ID_Persona INT NOT NULL,
    Email VARCHAR(100) NOT NULL,
    [Password] VARCHAR(100) NOT NULL,
    Rol CHAR(1) CHECK (Rol IN ('E', 'C')) NOT NULL,--Empleado-Cliente
    PRIMARY KEY (ID_Persona),
    CONSTRAINT FK_Usuarios_Personas FOREIGN KEY (ID_Persona) REFERENCES Personas(ID_Persona)
);

CREATE TABLE Mesas (
    ID_Mesa INT PRIMARY KEY,
    CantidadAsientos INT NOT NULL
);

CREATE TABLE Reservas (
    ID_Reserva INT PRIMARY KEY,
    FechaHora DATETIME NOT NULL,
    ID_Usuario INT NOT NULL,
    ID_Mesa INT NOT NULL,
    Estado CHAR(1) CHECK (Estado IN ('D', 'O')) NOT NULL,--Disponible-Ocupada
    CONSTRAINT FK_Reservas_Usuarios FOREIGN KEY (ID_Usuario) REFERENCES Usuarios(ID_Persona),
    CONSTRAINT FK_Reservas_Mesas FOREIGN KEY (ID_Mesa) REFERENCES Mesas(ID_Mesa)
);